Start Training Korean Tacotron2
SLURM_SUBMIT_DIR = /home/shchae7/UGRP/tts/Tacotron2-Wavenet-Korean-TTS
CUDA_HOME = /opt/ohpc/pub/apps/cuda-10.0
CUDA_VISIBLE_DEVICES = 5,6
CUDA_VERSION=10.0
0: n17
0: /home/shchae7/UGRP/tts/Tacotron2-Wavenet-Korean-TTS
0: Thu Sep 10 13:50:49 KST 2020
no change     /home/shchae7/anaconda3/condabin/conda
no change     /home/shchae7/anaconda3/bin/conda
no change     /home/shchae7/anaconda3/bin/conda-env
no change     /home/shchae7/anaconda3/bin/activate
no change     /home/shchae7/anaconda3/bin/deactivate
no change     /home/shchae7/anaconda3/etc/profile.d/conda.sh
no change     /home/shchae7/anaconda3/etc/fish/conf.d/conda.fish
no change     /home/shchae7/anaconda3/shell/condabin/Conda.psm1
no change     /home/shchae7/anaconda3/shell/condabin/conda-hook.ps1
no change     /home/shchae7/anaconda3/lib/python3.7/site-packages/xontrib/conda.xsh
no change     /home/shchae7/anaconda3/etc/profile.d/conda.csh
no change     /home/shchae7/.bashrc
No action taken.

CommandNotFoundError: Your shell has not been properly configured to use 'conda activate'.
To initialize your shell, run

    $ conda init <SHELL_NAME>

Currently supported shells are:
  - bash
  - fish
  - tcsh
  - xonsh
  - zsh
  - powershell

See 'conda init --help' for more information and options.

IMPORTANT: You may need to close and restart your shell after running 'conda init'.


/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:516: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint8 = np.dtype([("qint8", np.int8, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:517: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_quint8 = np.dtype([("quint8", np.uint8, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:518: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint16 = np.dtype([("qint16", np.int16, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:519: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_quint16 = np.dtype([("quint16", np.uint16, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:520: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint32 = np.dtype([("qint32", np.int32, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:525: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  np_resource = np.dtype([("resource", np.ubyte, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:541: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint8 = np.dtype([("qint8", np.int8, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:542: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_quint8 = np.dtype([("quint8", np.uint8, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:543: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint16 = np.dtype([("qint16", np.int16, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:544: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_quint16 = np.dtype([("quint16", np.uint16, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:545: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  _np_qint32 = np.dtype([("qint32", np.int32, 1)])
/home/shchae7/anaconda3/envs/tf1-gpu-py36/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:550: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.
  np_resource = np.dtype([("resource", np.ubyte, 1)])
WARNING:tensorflow:
The TensorFlow contrib module will not be included in TensorFlow 2.0.
For more information, please see:
  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md
  * https://github.com/tensorflow/addons
  * https://github.com/tensorflow/io (for I/O related ops)
If you depend on functionality not listed there, please file an issue.

WARNING:tensorflow:From train_tacotron2.py:30: The name tf.logging.set_verbosity is deprecated. Please use tf.compat.v1.logging.set_verbosity instead.

WARNING:tensorflow:From train_tacotron2.py:30: The name tf.logging.ERROR is deprecated. Please use tf.compat.v1.logging.ERROR instead.

 [*] MODEL dir: logs_tacotron2/son_2020-09-10_13-52-31
 [*] PARAM path: logs_tacotron2/son_2020-09-10_13-52-31/params.json
['./data/son']
==================================================
==================================================
 [*] Checkpoint path: logs_tacotron2/son_2020-09-10_13-52-31/model.ckpt
 [*] Loading training data from: ['./data/son']
 [*] Using model: logs_tacotron2/son_2020-09-10_13-52-31
Hyperparameters:
  adam_beta1: 0.9
  adam_beta2: 0.999
  allow_clipping_in_normalization: True
  attention_dim: 128
  attention_filters: 32
  attention_kernel: (31,)
  attention_size: 128
  attention_type: bah_mon_norm
  attention_win_size: 7
  cleaners: korean_cleaners
  clip_mels_length: True
  cumulative_weights: True
  dec_prenet_sizes: [256, 256]
  decoder_layers: 2
  decoder_lstm_units: 1024
  dilation_channels: 256
  dilations: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1, 2, 4, 8, 16, 32, 64, 128, 256, 512]
  dropout_prob: 0.5
  embedding_size: 512
  enc_conv_channels: 512
  enc_conv_kernel_size: 5
  enc_conv_num_layers: 3
  encoder_lstm_units: 256
  fft_size: 2048
  filter_width: 3
  gc_channels: 32
  griffin_lim_iters: 60
  hop_size: 300
  inference_prenet_dropout: True
  initial_data_greedy: True
  initial_phase_step: 8000
  input_type: raw
  l2_regularization_strength: 0
  legacy: True
  main_data: ['']
  main_data_greedy_factor: 0
  mask_encoder: True
  max_abs_value: 4.0
  max_checkpoints: 3
  max_mel_frames: 1000
  max_n_frame: 1000
  min_level_db: -100
  min_n_frame: 150
  min_tokens: 30
  model_type: single
  momentum: 0.9
  name: Tacotron-2
  num_mels: 80
  num_steps: 1000000
  optimizer: adam
  out_channels: 30
  post_bank_channel_size: 128
  post_bank_size: 8
  post_highway_depth: 4
  post_maxpool_width: 2
  post_proj_sizes: [256, 80]
  post_proj_width: 3
  post_rnn_size: 128
  postnet_channels: 512
  postnet_kernel_size: (5,)
  postnet_num_layers: 5
  power: 1.5
  preemphasis: 0.97
  preemphasize: True
  prenet_layers: [256, 256]
  prioritize_loss: False
  quantization_channels: 256
  reduction_factor: 2
  ref_level_db: 20
  rescaling: True
  rescaling_max: 0.999
  residual_channels: 128
  residual_legacy: True
  sample_rate: 24000
  sample_size: 9000
  scalar_input: True
  signal_normalization: True
  silence_threshold: 0
  skip_channels: 128
  skip_inadequate: False
  skip_path_filter: False
  smoothing: False
  speaker_embedding_size: 16
  store_metadata: False
  symmetric_mels: True
  synthesis_constraint: False
  synthesis_constraint_type: window
  tacotron_decay_learning_rate: True
  tacotron_decay_rate: 0.5
  tacotron_decay_steps: 18000
  tacotron_final_learning_rate: 0.0001
  tacotron_initial_learning_rate: 0.001
  tacotron_reg_weight: 1e-06
  tacotron_start_decay: 40000
  tacotron_zoneout_rate: 0.1
  trim_fft_size: 512
  trim_hop_size: 128
  trim_silence: True
  trim_top_db: 23
  upsample_factor: [12, 25]
  upsample_type: SubPixel
  use_biases: True
  use_lws: False
  wavenet_batch_size: 2
  wavenet_clip_gradients: True
  wavenet_decay_rate: 0.5
  wavenet_decay_steps: 300000
  wavenet_dropout: 0.05
  wavenet_learning_rate: 0.001
  win_size: 1200
filter_by_min_max_frame_batch:   0%|          | 0/50 [00:00<?, ?it/s]filter_by_min_max_frame_batch:   2%|▏         | 1/50 [00:00<00:09,  5.30it/s]filter_by_min_max_frame_batch:  18%|█▊        | 9/50 [00:00<00:05,  7.25it/s]filter_by_min_max_frame_batch:  26%|██▌       | 13/50 [00:00<00:03,  9.61it/s]filter_by_min_max_frame_batch:  44%|████▍     | 22/50 [00:00<00:02, 13.08it/s]filter_by_min_max_frame_batch:  60%|██████    | 30/50 [00:00<00:01, 17.41it/s]filter_by_min_max_frame_batch:  78%|███████▊  | 39/50 [00:00<00:00, 22.37it/s]filter_by_min_max_frame_batch:  96%|█████████▌| 48/50 [00:00<00:00, 28.73it/s]filter_by_min_max_frame_batch: 100%|██████████| 50/50 [00:00<00:00, 55.17it/s] [./data/son] Loaded metadata for 38 examples (0.05 hours)
 [./data/son] Max length: 827
 [./data/son] Min length: 176
========================================
Data Amount:
{'./data/son': 1.0}
========================================

filter_by_min_max_frame_batch:   0%|          | 0/50 [00:00<?, ?it/s]filter_by_min_max_frame_batch: 100%|██████████| 50/50 [00:00<00:00, 1058.52it/s]2020-09-10 13:52:45.713576: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1
2020-09-10 13:52:45.966464: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: 
name: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.545
pciBusID: 0000:b2:00.0
2020-09-10 13:52:45.968741: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 1 with properties: 
name: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.545
pciBusID: 0000:da:00.0
2020-09-10 13:52:45.976509: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0
2020-09-10 13:52:46.164427: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0
2020-09-10 13:52:46.535658: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0
2020-09-10 13:52:47.348783: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0
2020-09-10 13:52:47.787167: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0
2020-09-10 13:52:48.025644: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0
2020-09-10 13:52:49.094748: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7
2020-09-10 13:52:49.103789: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0, 1
2020-09-10 13:52:49.104412: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA
2020-09-10 13:52:49.537566: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55f0840735e0 executing computations on platform CUDA. Devices:
2020-09-10 13:52:49.537678: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-09-10 13:52:49.537709: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (1): GeForce RTX 2080 Ti, Compute Capability 7.5
2020-09-10 13:52:49.543136: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2200000000 Hz
2020-09-10 13:52:49.546961: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55f084142660 executing computations on platform Host. Devices:
2020-09-10 13:52:49.547003: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>
2020-09-10 13:52:49.549845: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: 
name: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.545
pciBusID: 0000:b2:00.0
2020-09-10 13:52:49.552562: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 1 with properties: 
name: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.545
pciBusID: 0000:da:00.0
2020-09-10 13:52:49.552645: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0
2020-09-10 13:52:49.552668: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0
2020-09-10 13:52:49.552687: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0
2020-09-10 13:52:49.552705: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0
2020-09-10 13:52:49.552723: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0
2020-09-10 13:52:49.552741: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0
2020-09-10 13:52:49.552760: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7
2020-09-10 13:52:49.562418: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0, 1
2020-09-10 13:52:49.562491: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0
2020-09-10 13:52:49.567638: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:
2020-09-10 13:52:49.567657: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 1 
2020-09-10 13:52:49.567671: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N N 
2020-09-10 13:52:49.567678: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 1:   N N 
2020-09-10 13:52:49.574752: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10283 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2080 Ti, pci bus id: 0000:b2:00.0, compute capability: 7.5)
2020-09-10 13:52:49.577843: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 10283 MB memory) -> physical GPU (device: 1, name: GeForce RTX 2080 Ti, pci bus id: 0000:da:00.0, compute capability: 7.5)
2020-09-10 13:52:53.145818: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1412] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.
2020-09-10 13:53:07.672513: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0
2020-09-10 13:53:08.404305: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7

  0%|          | 0/1 [00:00<?, ?it/s]/home/shchae7/.local/lib/python3.6/site-packages/matplotlib/font_manager.py:1297: UserWarning: findfont: Font family ['NanumBarunGothic'] not found. Falling back to DejaVu Sans
  (prop.get_family(), self.defaultFamily[fontext]))
100%|██████████| 1/1 [00:04<00:00,  4.32s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:09<00:09,  9.77s/it]100%|██████████| 2/2 [00:20<00:00,  9.99s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:02<00:00,  2.56s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:02<00:02,  2.83s/it]100%|██████████| 2/2 [00:06<00:00,  2.95s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:03<00:00,  3.25s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:02<00:02,  2.74s/it]100%|██████████| 2/2 [00:05<00:00,  2.89s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:02<00:00,  2.60s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:03<00:03,  3.06s/it]100%|██████████| 2/2 [00:06<00:00,  3.29s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:04<00:00,  4.91s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:03<00:03,  3.78s/it]100%|██████████| 2/2 [00:07<00:00,  3.72s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:04<00:00,  4.61s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:03<00:03,  3.12s/it]100%|██████████| 2/2 [00:06<00:00,  3.35s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:03<00:00,  3.69s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:02<00:02,  2.97s/it]/home/shchae7/.local/lib/python3.6/site-packages/matplotlib/pyplot.py:524: RuntimeWarning: More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
  max_open_warning, RuntimeWarning)
100%|██████████| 2/2 [00:06<00:00,  3.08s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:02<00:00,  2.71s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:03<00:03,  3.05s/it]100%|██████████| 2/2 [00:06<00:00,  3.19s/it]
  0%|          | 0/1 [00:00<?, ?it/s]100%|██████████| 1/1 [00:02<00:00,  2.52s/it]
  0%|          | 0/2 [00:00<?, ?it/s] 50%|█████     | 1/2 [00:03<00:03,  3.97s/it]100%|██████████| 2/2 [00:07<00:00,  3.95s/it]slurmstepd: error: *** JOB 29438 ON n17 CANCELLED AT 2020-09-10T15:51:05 DUE TO TIME LIMIT ***
